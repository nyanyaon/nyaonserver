<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <link type="text/css" rel="stylesheet" href="./style.css">
  <title>Nyanyaon's Portofolio</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
    integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI=" crossorigin="" />
  <!-- Make sure you put this AFTER Leaflet's CSS -->
  <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"
    integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM=" crossorigin=""></script>
  <script src="https://kit.fontawesome.com/bc5cc0833b.js" crossorigin="anonymous"></script>
</head>

<body>
  <div class="container">
    <section id="porto-about">
      <section id="header">
        <div class="content">
          <h1>WELCOME TO NYANYAON</h1>
          <p>GEOSPATIAL IT PROFESSIONAL</p>
        </div>
        <div class="porto-img">
          <svg width="74" height="107" viewBox="0 0 74 107" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd"
              d="M33.9368 15.8583V1.49012e-06L6.85453e-07 0L0 15.8583H1.59442e-05V106.885H15.9094L15.971 106.947L57.5657 65.352V91.0267H39.4872V106.885H57.5657H73.424L73.424 91.0267L73.424 0H57.5657V0.0564816L16.0169 41.6052V15.8583L33.9368 15.8583ZM37.4001 63.0906L16.0169 84.4737V64.0323L27.1794 52.8698L37.4001 63.0906ZM46.6772 53.8134L57.5657 42.925V22.4835L36.4565 43.5927L46.6772 53.8134Z"
              fill="url(#paint0_linear_18_2)" />
            <defs>
              <linearGradient id="paint0_linear_18_2" x1="0" y1="0" x2="73.424" y2="106.885"
                gradientUnits="userSpaceOnUse">
                <stop stop-color="#0D83C6" />
                <stop offset="1" stop-color="#84FF82" />
              </linearGradient>
            </defs>
          </svg>
        </div>
      </section>
      <section id="body">
        <section id="content">
          <p>Hi, I'm enthusiast in geospatial and data science</p>
          <p id="loc"></p>
        </section>
        <section id="projects">
          <h2>PROJECTS</h2>
          <div class="list-project">
            <div class="box">
              <a href="https://sidarta.nyanyaon.my.id/">
                <img src="/img/sidarta_logo.png" alt="logo sidarta">
                <h3>SIDARTA</h3>
              </a>
            </div>
            <div class="box">

            </div>
            <div class="box">

            </div>
          </div>
        </section>
      </section>
      <section id="footer">
        <p>© Copyright 2022 Nyanyaon made with ❤️</p>
        <div class="social-media">
          <a href="https://instagram.com/ahmaddkh_"><i class="fa-brands fa-instagram"></i></a>
        </div>
      </section>
    </section>
    <div id="map">
    </div>
  </div>
  <script>
    var map = L.map('map').setView([-8.715, 116.292], 16);
    L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19,
      attribution: '© OpenStreetMap'
    }).addTo(map);
    var marker = L.marker([-8.715, 116.292]).addTo(map);
    marker.bindPopup("<b>Home!</b><br>You can find me here.").openPopup();
    var popup = L.popup();

    function onLocationFound(e) {
      let locEl = document.getElementById("loc");
      var radius = e.accuracy;

      locEl.textContent = `You're location at ${e.latlng.lat}, ${e.latlng.lng}`;

      L.marker(e.latlng).addTo(map)
        .bindPopup("You are within " + radius + " meters from this point").openPopup();

      L.circle(e.latlng, radius).addTo(map);
    }

    var listPoint = [];
    var listObjectPoint = [];
    var polygon = null;
    var id = 1;
    function onClick(e) {
      if (polygon !== null) {
        polygon.remove();
      }
      listPoint.push(e.latlng);
      var point = L.marker(e.latlng).addTo(map)
        .bindPopup("You click here").openPopup();
      listObjectPoint.push(point);
      if (listPoint.length > 2) {
        polygon = L.polygon(listPoint, { color: 'red' }).addTo(map).bindPopup("left click to save").openPopup();
        polygon.on('contextmenu', () => {
          listPoint = [];
          listObjectPoint.forEach(obj => {
            obj.remove();
          })

          polygon.bindPopup("saved with id " + id++).openPopup();
          polygon = null;
        }).once('click', onClick);
      }
    }

    map.on('locationfound', onLocationFound);

    map.on('click', onClick)

    map.locate({ setView: true, maxZoom: 18 });
  </script>
</body>

</html>